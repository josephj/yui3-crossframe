<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="zh-tw">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Cross Frame Prototype</title>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssreset/reset-min.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssfonts/fonts-min.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.2.0/build/cssbase/base-min.css">
<style type="text/css">
body {
    padding: 10px;
}
h1 {
    margin: 20px 0;
    font-family: Georgia;
    font-weight: bold;
}
iframe {
    border: solid 3px #ccc;
    position: fixed;
    top: 10px;
    right: 10px;
    *position: absolute;
}
textarea {
    width: 500px;
    height: 200px;
}
</style>
<script type="text/javascript" src="http://yui.yahooapis.com/3.2.0/build/yui/yui-min.js"></script> 
<script type="text/javascript" src="crossframe.js"></script>
<script type="text/javascript">
YUI().use("crossframe", function (Y) {
    var formNode = Y.one("form");
    formNode.on("submit", function (e) {
        e.preventDefault();
        Y.CrossFrame.fire(
            "frames['simple-iframe']", // 指定要傳送的 Iframe
            "crossframe:test1",
            {"value" : formNode.one("textarea").get("value")}, // 指定要傳送的訊息
            {proxy: "http://josephjiang.com/project/yui3-crossframe/proxy.html"} // 指定給不支援 postMessage 瀏覽器的 proxy 檔案
        );
        
        /*
        Y.CrossFrame.postMessage(
            formNode.one("textarea").get("value"), // 指定要傳送的訊息
            {proxy: "http://josephjiang.com/project/yui3-crossframe/proxy.html"} // 指定給不支援 postMessage 瀏覽器的 proxy 檔案
        );
        */
    });
});
</script>
</head>
<body>
    <h1>Y.CrossFrame Simple Example</h1>
    <p>
        Current Location: <a href="http://josephj.com/project/yui3-crossframe/simple.html">http://josephj.com/project/yui3-crossframe/simple.html</a>
    </p>
    <form>
        <textarea>Hello World</textarea><br>
        <input type="submit" value="Submit">
    </form>
    <iframe src="http://josephjiang.com/project/yui3-crossframe/simple-iframe.html" name="simple-iframe" width="500" height="500" border="3" frameborder="3"></iframe>
</body>
</html>
